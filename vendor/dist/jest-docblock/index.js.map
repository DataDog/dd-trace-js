{"version":3,"file":"jest-docblock/index.js","sources":["webpack:///./detect-newline/index.js","webpack:///./jest-docblock/build/index.js"],"sourcesContent":["'use strict';\n\nconst detectNewline = string => {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tconst newlines = string.match(/(?:\\r?\\n)/g) || [];\n\n\tif (newlines.length === 0) {\n\t\treturn;\n\t}\n\n\tconst crlf = newlines.filter(newline => newline === '\\r\\n').length;\n\tconst lf = newlines.length - crlf;\n\n\treturn crlf > lf ? '\\r\\n' : '\\n';\n};\n\nmodule.exports = detectNewline;\nmodule.exports.graceful = string => (typeof string === 'string' && detectNewline(string)) || '\\n';\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.extract = extract;\nexports.parse = parse;\nexports.parseWithComments = parseWithComments;\nexports.print = print;\nexports.strip = strip;\nfunction _os() {\n  const data = require('os');\n  _os = function () {\n    return data;\n  };\n  return data;\n}\nfunction _detectNewline() {\n  const data = _interopRequireDefault(require('detect-newline'));\n  _detectNewline = function () {\n    return data;\n  };\n  return data;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {default: obj};\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst commentEndRe = /\\*\\/$/;\nconst commentStartRe = /^\\/\\*\\*?/;\nconst docblockRe = /^\\s*(\\/\\*\\*?(.|\\r?\\n)*?\\*\\/)/;\nconst lineCommentRe = /(^|\\s+)\\/\\/([^\\r\\n]*)/g;\nconst ltrimNewlineRe = /^(\\r?\\n)+/;\nconst multilineRe =\n  /(?:^|\\r?\\n) *(@[^\\r\\n]*?) *\\r?\\n *(?![^@\\r\\n]*\\/\\/[^]*)([^@\\r\\n\\s][^@\\r\\n]+?) *\\r?\\n/g;\nconst propertyRe = /(?:^|\\r?\\n) *@(\\S+) *([^\\r\\n]*)/g;\nconst stringStartRe = /(\\r?\\n|^) *\\* ?/g;\nconst STRING_ARRAY = [];\nfunction extract(contents) {\n  const match = contents.match(docblockRe);\n  return match ? match[0].trimLeft() : '';\n}\nfunction strip(contents) {\n  const match = contents.match(docblockRe);\n  return match && match[0] ? contents.substring(match[0].length) : contents;\n}\nfunction parse(docblock) {\n  return parseWithComments(docblock).pragmas;\n}\nfunction parseWithComments(docblock) {\n  const line = (0, _detectNewline().default)(docblock) ?? _os().EOL;\n  docblock = docblock\n    .replace(commentStartRe, '')\n    .replace(commentEndRe, '')\n    .replace(stringStartRe, '$1');\n\n  // Normalize multi-line directives\n  let prev = '';\n  while (prev !== docblock) {\n    prev = docblock;\n    docblock = docblock.replace(multilineRe, `${line}$1 $2${line}`);\n  }\n  docblock = docblock.replace(ltrimNewlineRe, '').trimRight();\n  const result = Object.create(null);\n  const comments = docblock\n    .replace(propertyRe, '')\n    .replace(ltrimNewlineRe, '')\n    .trimRight();\n  let match;\n  while ((match = propertyRe.exec(docblock))) {\n    // strip linecomments from pragmas\n    const nextPragma = match[2].replace(lineCommentRe, '');\n    if (\n      typeof result[match[1]] === 'string' ||\n      Array.isArray(result[match[1]])\n    ) {\n      result[match[1]] = STRING_ARRAY.concat(result[match[1]], nextPragma);\n    } else {\n      result[match[1]] = nextPragma;\n    }\n  }\n  return {\n    comments,\n    pragmas: result\n  };\n}\nfunction print({comments = '', pragmas = {}}) {\n  const line = (0, _detectNewline().default)(comments) ?? _os().EOL;\n  const head = '/**';\n  const start = ' *';\n  const tail = ' */';\n  const keys = Object.keys(pragmas);\n  const printedObject = keys\n    .flatMap(key => printKeyValues(key, pragmas[key]))\n    .map(keyValue => `${start} ${keyValue}${line}`)\n    .join('');\n  if (!comments) {\n    if (keys.length === 0) {\n      return '';\n    }\n    if (keys.length === 1 && !Array.isArray(pragmas[keys[0]])) {\n      const value = pragmas[keys[0]];\n      return `${head} ${printKeyValues(keys[0], value)[0]}${tail}`;\n    }\n  }\n  const printedComments =\n    comments\n      .split(line)\n      .map(textLine => `${start} ${textLine}`)\n      .join(line) + line;\n  return (\n    head +\n    line +\n    (comments ? printedComments : '') +\n    (comments && keys.length ? start + line : '') +\n    printedObject +\n    tail\n  );\n}\nfunction printKeyValues(key, valueOrArray) {\n  return STRING_ARRAY.concat(valueOrArray).map(value =>\n    `@${key} ${value}`.trim()\n  );\n}\n"],"names":["TypeError","Object","Array"],"mappings":"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"}