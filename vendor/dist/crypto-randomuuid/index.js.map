{"version":3,"file":"crypto-randomuuid/index.js","sources":["webpack:///./crypto-randomuuid/index.js","webpack:///./crypto-randomuuid/polyfill.js","webpack:///./crypto-randomuuid/validators.js"],"sourcesContent":["'use strict';\n\nconst crypto = require('crypto');\n\nmodule.exports = typeof crypto.randomUUID === 'function'\n  ? crypto.randomUUID\n  : require('./polyfill');\n","'use strict';\n\nconst crypto = require('crypto');\n\nconst {\n  validateBoolean,\n  validateObject,\n  codes: {\n    ERR_OPERATION_FAILED\n  }\n} = require('./validators');\n\nconst { randomFillSync } = crypto;\n\n// This is a non-cryptographically secure replacement for the native version\n// of the `secureBuffer` function used in Node.js core. This means `randomUUID`\n// should not be used where cryptographically secure uuids are important.\n//\n// Node.js core uses a native version which uses `OPENSSL_secure_malloc`\n// rather than `randomFillSync`.\nfunction secureBuffer (size) {\n  const buf = Buffer.alloc(size);\n  return randomFillSync(buf);\n}\n\n// Implements an RFC 4122 version 4 random UUID.\n// To improve performance, random data is generated in batches\n// large enough to cover kBatchSize UUID's at a time. The uuidData\n// buffer is reused. Each call to randomUUID() consumes 16 bytes\n// from the buffer.\n\nconst kBatchSize = 128;\nlet uuidData;\nlet uuidNotBuffered;\nlet uuidBatch = 0;\n\nlet hexBytesCache;\nfunction getHexBytes () {\n  if (hexBytesCache === undefined) {\n    hexBytesCache = new Array(256);\n    for (let i = 0; i < hexBytesCache.length; i++) {\n      const hex = i.toString(16);\n      hexBytesCache[i] = hex.padStart(2, '0');\n    }\n  }\n  return hexBytesCache;\n}\n\nfunction serializeUUID (buf, offset = 0) {\n  const kHexBytes = getHexBytes();\n  // xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n  return kHexBytes[buf[offset]] +\n    kHexBytes[buf[offset + 1]] +\n    kHexBytes[buf[offset + 2]] +\n    kHexBytes[buf[offset + 3]] +\n    '-' +\n    kHexBytes[buf[offset + 4]] +\n    kHexBytes[buf[offset + 5]] +\n    '-' +\n    kHexBytes[(buf[offset + 6] & 0x0f) | 0x40] +\n    kHexBytes[buf[offset + 7]] +\n    '-' +\n    kHexBytes[(buf[offset + 8] & 0x3f) | 0x80] +\n    kHexBytes[buf[offset + 9]] +\n    '-' +\n    kHexBytes[buf[offset + 10]] +\n    kHexBytes[buf[offset + 11]] +\n    kHexBytes[buf[offset + 12]] +\n    kHexBytes[buf[offset + 13]] +\n    kHexBytes[buf[offset + 14]] +\n    kHexBytes[buf[offset + 15]];\n}\n\nfunction getBufferedUUID () {\n  if (!uuidData) uuidData = secureBuffer(16 * kBatchSize);\n  if (uuidData === undefined)\n    throw new ERR_OPERATION_FAILED('Out of memory');\n\n  if (uuidBatch === 0) randomFillSync(uuidData);\n  uuidBatch = (uuidBatch + 1) % kBatchSize;\n  return serializeUUID(uuidData, uuidBatch * 16);\n}\n\nfunction getUnbufferedUUID () {\n  if (!uuidNotBuffered) uuidNotBuffered = secureBuffer(16 * kBatchSize);\n  if (uuidNotBuffered === undefined)\n    throw new ERR_OPERATION_FAILED('Out of memory');\n  randomFillSync(uuidNotBuffered);\n  return serializeUUID(uuidNotBuffered);\n}\n\nfunction randomUUID (options) {\n  if (options !== undefined)\n    validateObject(options, 'options');\n  const {\n    disableEntropyCache = false,\n  } = options || {};\n\n  validateBoolean(disableEntropyCache, 'options.disableEntropyCache');\n\n  return disableEntropyCache ? getUnbufferedUUID() : getBufferedUUID();\n}\n\nmodule.exports = randomUUID;\n","'use strict';\n\n// Polyfill relevant Node.js core validators and error types\n\nconst assert = require('assert');\nconst util = require('util');\n\n// Sorted by a rough estimate on most frequently used entries.\nconst kTypes = [\n  'string',\n  'function',\n  'number',\n  'object',\n  // Accept 'Function' and 'Object' as alternative to the lower cased version.\n  'Function',\n  'Object',\n  'boolean',\n  'bigint',\n  'symbol',\n];\n\nclass ERR_OPERATION_FAILED extends TypeError {\n  constructor(message) {\n    super(`Operation failed: ${message}`);\n    this.code = this.constructor.name;\n\n    Object.defineProperties(this, {\n      toString: {\n        value () {\n          return `${this.name} [${this.code}]: ${this.message}`;\n        },\n        enumerable: false,\n        writable: true,\n        configurable: true,\n      },\n    });\n  }\n}\n\nclass ERR_INVALID_ARG_TYPE extends TypeError {\n  constructor(name, expected, actual) {\n    super();\n\n    assert(typeof name === 'string', \"'name' must be a string\");\n    if (!Array.isArray(expected)) {\n      expected = [expected];\n    }\n\n    let msg = 'The ';\n    if (name.endsWith(' argument')) {\n      // For cases like 'first argument'\n      msg += `${name} `;\n    } else {\n      const type = name.includes('.') ? 'property' : 'argument';\n      msg += `\"${name}\" ${type} `;\n    }\n    msg += 'must be ';\n\n    const types = [];\n    const instances = [];\n    const other = [];\n\n    for (const value of expected) {\n      assert(typeof value === 'string',\n        'All expected entries have to be of type string');\n      if (kTypes.includes(value)) {\n        types.push(value.toLowerCase());\n      } else if (classRegExp.test(value)) {\n        instances.push(value);\n      } else {\n        assert(value !== 'object',\n          'The value \"object\" should be written as \"Object\"');\n        other.push(value);\n      }\n    }\n\n    // Special handle `object` in case other instances are allowed to outline\n    // the differences between each other.\n    if (instances.length > 0) {\n      const pos = types.indexOf('object');\n      if (pos !== -1) {\n        types.splice(pos, 1);\n        instances.push('Object');\n      }\n    }\n\n    if (types.length > 0) {\n      if (types.length > 2) {\n        const last = types.pop();\n        msg += `one of type ${types.join(', ')}, or ${last}`;\n      } else if (types.length === 2) {\n        msg += `one of type ${types[0]} or ${types[1]}`;\n      } else {\n        msg += `of type ${types[0]}`;\n      }\n      if (instances.length > 0 || other.length > 0)\n        msg += ' or ';\n    }\n\n    if (instances.length > 0) {\n      if (instances.length > 2) {\n        const last = instances.pop();\n        msg +=\n          `an instance of ${instances.join(', ')}, or ${last}`;\n      } else {\n        msg += `an instance of ${instances[0]}`;\n        if (instances.length === 2) {\n          msg += ` or ${instances[1]}`;\n        }\n      }\n      if (other.length > 0)\n        msg += ' or ';\n    }\n\n    if (other.length > 0) {\n      if (other.length > 2) {\n        const last = other.pop();\n        msg += `one of ${other.join(', ')}, or ${last}`;\n      } else if (other.length === 2) {\n        msg += `one of ${other[0]} or ${other[1]}`;\n      } else {\n        if (other[0].toLowerCase() !== other[0])\n          msg += 'an ';\n        msg += `${other[0]}`;\n      }\n    }\n\n    if (actual == null) {\n      msg += `. Received ${actual}`;\n    } else if (typeof actual === 'function' && actual.name) {\n      msg += `. Received function ${actual.name}`;\n    } else if (typeof actual === 'object') {\n      if (actual.constructor && actual.constructor.name) {\n        msg += `. Received an instance of ${actual.constructor.name}`;\n      } else {\n        const inspected = util.inspect(actual, { depth: -1 });\n        msg += `. Received ${inspected}`;\n      }\n    } else {\n      let inspected = util.inspect(actual, { colors: false });\n      if (inspected.length > 25) {\n        inspected = `${inspected.slice(0, 25)}...`;\n      }\n      msg += `. Received type ${typeof actual} (${inspected})`;\n    }\n\n    this.code = this.constructor.name;\n\n    Object.defineProperties(this, {\n      message: {\n        value: msg,\n        enumerable: false,\n        writable: true,\n        configurable: true,\n      },\n      toString: {\n        value() {\n          return `${this.name} [${this.code}]: ${this.message}`;\n        },\n        enumerable: false,\n        writable: true,\n        configurable: true,\n      },\n    });\n  }\n}\n\nfunction validateBoolean(value, name) {\n  if (typeof value !== 'boolean')\n    throw new ERR_INVALID_ARG_TYPE(name, 'boolean', value);\n}\n\nfunction validateObject(value, name, {\n  nullable = false,\n  allowArray = false,\n  allowFunction = false,\n} = {}) {\n  if ((!nullable && value === null) ||\n    (!allowArray && Array.isArray(value)) ||\n    (typeof value !== 'object' && (\n      !allowFunction || typeof value !== 'function'\n    ))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Object', value);\n  }\n};\n\nmodule.exports = {\n  validateBoolean,\n  validateObject,\n  codes: {\n    ERR_OPERATION_FAILED\n  }\n};\n"],"names":["Buffer","Array","TypeError","Object","t","classRegExp"],"mappings":"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"}