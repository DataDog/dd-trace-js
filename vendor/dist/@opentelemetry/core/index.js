(()=>{"use strict";var e,t,r,n,a,o,i,T={};T.d=(e,t)=>{for(var r in t)T.o(t,r)&&!T.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},T.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),T.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};T.r(u),T.d(u,{baggageUtils:()=>et,hrTime:()=>hrTime,timeInputToHrTime:()=>timeInputToHrTime,W3CTraceContextPropagator:()=>X,callWithTimeout:()=>callWithTimeout,AlwaysOnSampler:()=>H,isTracingSuppressed:()=>isTracingSuppressed,AlwaysOffSampler:()=>V,loggingErrorHandler:()=>loggingErrorHandler,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>y,deleteRPCMetadata:()=>deleteRPCMetadata,suppressTracing:()=>suppressTracing,RPCType:()=>i,RandomIdGenerator:()=>RandomIdGenerator_RandomIdGenerator,setRPCMetadata:()=>setRPCMetadata,unrefTimer:()=>unrefTimer,hrTimeToMilliseconds:()=>hrTimeToMilliseconds,TRACE_PARENT_HEADER:()=>D,unsuppressTracing:()=>unsuppressTracing,globalErrorHandler:()=>globalErrorHandler,_globalThis:()=>R,getEnvWithoutDefaults:()=>getEnvWithoutDefaults,ParentBasedSampler:()=>G,millisToHrTime:()=>millisToHrTime,isTimeInputHrTime:()=>isTimeInputHrTime,otperformance:()=>p,internal:()=>er,urlMatches:()=>urlMatches,BindOnceFuture:()=>ee,DEFAULT_ENVIRONMENT:()=>v,SDK_INFO:()=>m,isWrapped:()=>isWrapped,isAttributeKey:()=>isAttributeKey,TraceState:()=>B,hexToBase64:()=>hexToBase64,TRACE_STATE_HEADER:()=>w,getEnv:()=>getEnv,getTimeOrigin:()=>getTimeOrigin,TraceIdRatioBasedSampler:()=>F,hrTimeDuration:()=>hrTimeDuration,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>h,isTimeInput:()=>isTimeInput,hexToBinary:()=>hexToBinary,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>A,parseTraceParent:()=>parseTraceParent,isUrlIgnored:()=>isUrlIgnored,parseEnvironment:()=>parseEnvironment,setGlobalErrorHandler:()=>setGlobalErrorHandler,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>P,isAttributeValue:()=>isAttributeValue,CompositePropagator:()=>C,hrTimeToMicroseconds:()=>hrTimeToMicroseconds,AnchoredClock:()=>E,TracesSamplerValues:()=>o,ExportResultCode:()=>n,hrTimeToNanoseconds:()=>hrTimeToNanoseconds,merge:()=>merge,TimeoutError:()=>$,W3CBaggagePropagator:()=>c,addHrTimes:()=>addHrTimes,getRPCMetadata:()=>getRPCMetadata,sanitizeAttributes:()=>sanitizeAttributes,hrTimeToTimeStamp:()=>hrTimeToTimeStamp,VERSION:()=>d});let l=require("@opentelemetry/api");var s=(0,l.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function suppressTracing(e){return e.setValue(s,!0)}function unsuppressTracing(e){return e.deleteValue(s)}function isTracingSuppressed(e){return!0===e.getValue(s)}var _="baggage",__read=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i};function serializeKeyPairs(e){return e.reduce(function(e,t){var r=""+e+(""!==e?",":"")+t;return r.length>8192?e:r},"")}function getKeyPairs(e){return e.getAllEntries().map(function(e){var t=__read(e,2),r=t[0],n=t[1],a=encodeURIComponent(r)+"="+encodeURIComponent(n.value);return void 0!==n.metadata&&(a+=";"+n.metadata.toString()),a})}function parsePairKeyValue(e){var t,r=e.split(";");if(!(r.length<=0)){var n=r.shift();if(n){var a=n.indexOf("=");if(!(a<=0)){var o=decodeURIComponent(n.substring(0,a).trim()),i=decodeURIComponent(n.substring(a+1).trim());return r.length>0&&(t=(0,l.baggageEntryMetadataFromString)(r.join(";"))),{key:o,value:i,metadata:t}}}}}function parseKeyPairsIntoRecord(e){return"string"!=typeof e||0===e.length?{}:e.split(",").map(function(e){return parsePairKeyValue(e)}).filter(function(e){return void 0!==e&&e.value.length>0}).reduce(function(e,t){return e[t.key]=t.value,e},{})}var c=function(){function W3CBaggagePropagator(){}return W3CBaggagePropagator.prototype.inject=function(e,t,r){var n=l.propagation.getBaggage(e);if(!(!n||isTracingSuppressed(e))){var a=serializeKeyPairs(getKeyPairs(n).filter(function(e){return e.length<=4096}).slice(0,180));a.length>0&&r.set(t,_,a)}},W3CBaggagePropagator.prototype.extract=function(e,t,r){var n=r.get(t,_),a=Array.isArray(n)?n.join(","):n;if(!a)return e;var o={};return 0===a.length||(a.split(",").forEach(function(e){var t=parsePairKeyValue(e);if(t){var r={value:t.value};t.metadata&&(r.metadata=t.metadata),o[t.key]=r}}),0===Object.entries(o).length)?e:l.propagation.setBaggage(e,l.propagation.createBaggage(o))},W3CBaggagePropagator.prototype.fields=function(){return[_]},W3CBaggagePropagator}(),E=function(){function AnchoredClock(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}return AnchoredClock.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},AnchoredClock}(),__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},attributes_read=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i};function sanitizeAttributes(e){var t,r,n={};if("object"!=typeof e||null==e)return n;try{for(var a=__values(Object.entries(e)),o=a.next();!o.done;o=a.next()){var i=attributes_read(o.value,2),T=i[0],u=i[1];if(!isAttributeKey(T)){l.diag.warn("Invalid attribute key: "+T);continue}if(!isAttributeValue(u)){l.diag.warn("Invalid attribute value set for key: "+T);continue}Array.isArray(u)?n[T]=u.slice():n[T]=u}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}function isAttributeKey(e){return"string"==typeof e&&e.length>0}function isAttributeValue(e){return null==e||(Array.isArray(e)?isHomogeneousAttributeValueArray(e):isValidPrimitiveAttributeValue(e))}function isHomogeneousAttributeValueArray(e){try{for(var t,r,n,a=__values(e),o=a.next();!o.done;o=a.next()){var i=o.value;if(null!=i){if(!n){if(isValidPrimitiveAttributeValue(i)){n=typeof i;continue}return!1}if(typeof i!==n)return!1}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!0}function isValidPrimitiveAttributeValue(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function loggingErrorHandler(){return function(e){l.diag.error(stringifyException(e))}}function stringifyException(e){return"string"==typeof e?e:JSON.stringify(flattenException(e))}function flattenException(e){for(var t={},r=e;null!==r;)Object.getOwnPropertyNames(r).forEach(function(e){if(!t[e]){var n=r[e];n&&(t[e]=String(n))}}),r=Object.getPrototypeOf(r);return t}var f=loggingErrorHandler();function setGlobalErrorHandler(e){f=e}function globalErrorHandler(e){try{f(e)}catch(e){}}var p=require("perf_hooks").performance;function millisToHrTime(e){return[Math.trunc(e/1e3),Math.round(e%1e3*1e6)]}function getTimeOrigin(){var e=p.timeOrigin;return"number"!=typeof e&&(e=p.timing&&p.timing.fetchStart),e}function hrTime(e){return addHrTimes(millisToHrTime(getTimeOrigin()),millisToHrTime("number"==typeof e?e:p.now()))}function timeInputToHrTime(e){if(isTimeInputHrTime(e))return e;if("number"==typeof e)if(e<getTimeOrigin())return hrTime(e);else return millisToHrTime(e);if(e instanceof Date)return millisToHrTime(e.getTime());throw TypeError("Invalid input type")}function hrTimeDuration(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=1e9),[r,n]}function hrTimeToTimeStamp(e){var t=""+"0".repeat(9)+e[1]+"Z",r=t.substring(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",r)}function hrTimeToNanoseconds(e){return 1e9*e[0]+e[1]}function hrTimeToMilliseconds(e){return 1e3*e[0]+e[1]/1e6}function hrTimeToMicroseconds(e){return 1e6*e[0]+e[1]/1e3}function isTimeInputHrTime(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function isTimeInput(e){return isTimeInputHrTime(e)||"number"==typeof e||e instanceof Date}function addHrTimes(e,t){var r=[e[0]+t[0],e[1]+t[1]];return r[1]>=1e9&&(r[1]-=1e9,r[0]+=1),r}function intValue(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function hexToBinary(e){for(var t=new Uint8Array(e.length/2),r=0,n=0;n<e.length;n+=2){var a=intValue(e.charCodeAt(n)),o=intValue(e.charCodeAt(n+1));t[r++]=a<<4|o}return t}(e=n||(n={}))[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED";var RandomIdGenerator_RandomIdGenerator=function(){this.generateTraceId=getIdGenerator(16),this.generateSpanId=getIdGenerator(8)},O=Buffer.allocUnsafe(16);function getIdGenerator(e){return function(){for(var t=0;t<e/4;t++)O.writeUInt32BE(0x100000000*Math.random()>>>0,4*t);for(var t=0;t<e;t++)if(O[t]>0)break;else t===e-1&&(O[e-1]=1);return O.toString("hex",0,e)}}var d="1.30.1",m=((a={})["telemetry.sdk.name"]="opentelemetry",a["process.runtime.name"]="node",a["telemetry.sdk.language"]="nodejs",a["telemetry.sdk.version"]=d,a),R="object"==typeof globalThis?globalThis:global;(t=o||(o={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio";var g=["OTEL_SDK_DISABLED"];function isEnvVarABoolean(e){return g.indexOf(e)>-1}var S=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function isEnvVarANumber(e){return S.indexOf(e)>-1}var L=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function isEnvVarAList(e){return L.indexOf(e)>-1}var P=1/0,y=128,h=128,A=128,v={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:l.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:P,OTEL_ATTRIBUTE_COUNT_LIMIT:y,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:P,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:y,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:P,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:y,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:h,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:A,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:o.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function parseBoolean(e,t,r){if(void 0!==r[e]){var n=String(r[e]);t[e]="true"===n.toLowerCase()}}function parseNumber(e,t,r,n,a){if(void 0===n&&(n=-1/0),void 0===a&&(a=1/0),void 0!==r[e]){var o=Number(r[e]);isNaN(o)||(o<n?t[e]=n:o>a?t[e]=a:t[e]=o)}}function parseStringList(e,t,r,n){void 0===n&&(n=",");var a=r[e];"string"==typeof a&&(t[e]=a.split(n).map(function(e){return e.trim()}))}var I={ALL:l.DiagLogLevel.ALL,VERBOSE:l.DiagLogLevel.VERBOSE,DEBUG:l.DiagLogLevel.DEBUG,INFO:l.DiagLogLevel.INFO,WARN:l.DiagLogLevel.WARN,ERROR:l.DiagLogLevel.ERROR,NONE:l.DiagLogLevel.NONE};function setLogLevelFromEnv(e,t,r){var n=r[e];if("string"==typeof n){var a=I[n.toUpperCase()];null!=a&&(t[e]=a)}}function parseEnvironment(e){var t={};for(var r in v)if("OTEL_LOG_LEVEL"===r)setLogLevelFromEnv(r,t,e);else if(isEnvVarABoolean(r))parseBoolean(r,t,e);else if(isEnvVarANumber(r))parseNumber(r,t,e);else if(isEnvVarAList(r))parseStringList(r,t,e);else{var n=e[r];null!=n&&(t[r]=String(n))}return t}function getEnv(){return Object.assign({},v,parseEnvironment(process.env))}function getEnvWithoutDefaults(){return parseEnvironment(process.env)}function hexToBase64(e){return Buffer.from(hexToBinary(e)).toString("base64")}function unrefTimer(e){e.unref()}var composite_values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(){function CompositePropagator(e){var t;void 0===e&&(e={}),this._propagators=null!=(t=e.propagators)?t:[],this._fields=Array.from(new Set(this._propagators.map(function(e){return"function"==typeof e.fields?e.fields():[]}).reduce(function(e,t){return e.concat(t)},[])))}return CompositePropagator.prototype.inject=function(e,t,r){var n,a;try{for(var o=composite_values(this._propagators),i=o.next();!i.done;i=o.next()){var T=i.value;try{T.inject(e,t,r)}catch(e){l.diag.warn("Failed to inject with "+T.constructor.name+". Err: "+e.message)}}}catch(e){n={error:e}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}},CompositePropagator.prototype.extract=function(e,t,r){return this._propagators.reduce(function(e,n){try{return n.extract(e,t,r)}catch(e){l.diag.warn("Failed to extract with "+n.constructor.name+". Err: "+e.message)}return e},e)},CompositePropagator.prototype.fields=function(){return this._fields.slice()},CompositePropagator}(),b="[_0-9a-z-*/]",N=RegExp("^(?:[a-z]"+b+"{0,255}|"+("[a-z0-9]"+b+"{0,240}@[a-z]")+b+"{0,13})$"),M=/^[ -~]{0,255}[!-~]$/,U=/,|=/;function validateKey(e){return N.test(e)}function validateValue(e){return M.test(e)&&!U.test(e)}var B=function(){function TraceState(e){this._internalState=new Map,e&&this._parse(e)}return TraceState.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},TraceState.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},TraceState.prototype.get=function(e){return this._internalState.get(e)},TraceState.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+"="+e.get(r)),t},[]).join(",")},TraceState.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var a=r.slice(0,n),o=r.slice(n+1,t.length);validateKey(a)&&validateValue(o)&&e.set(a,o)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},TraceState.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},TraceState.prototype._clone=function(){var e=new TraceState;return e._internalState=new Map(this._internalState),e},TraceState}(),D="traceparent",w="tracestate",j=RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function parseTraceParent(e){var t=j.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var X=function(){function W3CTraceContextPropagator(){}return W3CTraceContextPropagator.prototype.inject=function(e,t,r){var n=l.trace.getSpanContext(e);if(!(!n||isTracingSuppressed(e))&&(0,l.isSpanContextValid)(n)){var a="00-"+n.traceId+"-"+n.spanId+"-0"+Number(n.traceFlags||l.TraceFlags.NONE).toString(16);r.set(t,D,a),n.traceState&&r.set(t,w,n.traceState.serialize())}},W3CTraceContextPropagator.prototype.extract=function(e,t,r){var n=r.get(t,D);if(!n)return e;var a=Array.isArray(n)?n[0]:n;if("string"!=typeof a)return e;var o=parseTraceParent(a);if(!o)return e;o.isRemote=!0;var i=r.get(t,w);if(i){var T=Array.isArray(i)?i.join(","):i;o.traceState=new B("string"==typeof T?T:void 0)}return l.trace.setSpanContext(e,o)},W3CTraceContextPropagator.prototype.fields=function(){return[D,w]},W3CTraceContextPropagator}(),x=(0,l.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA");function setRPCMetadata(e,t){return e.setValue(x,t)}function deleteRPCMetadata(e){return e.deleteValue(x)}function getRPCMetadata(e){return e.getValue(x)}(i||(i={})).HTTP="http";var V=function(){function AlwaysOffSampler(){}return AlwaysOffSampler.prototype.shouldSample=function(){return{decision:l.SamplingDecision.NOT_RECORD}},AlwaysOffSampler.prototype.toString=function(){return"AlwaysOffSampler"},AlwaysOffSampler}(),H=function(){function AlwaysOnSampler(){}return AlwaysOnSampler.prototype.shouldSample=function(){return{decision:l.SamplingDecision.RECORD_AND_SAMPLED}},AlwaysOnSampler.prototype.toString=function(){return"AlwaysOnSampler"},AlwaysOnSampler}(),G=function(){function ParentBasedSampler(e){var t,r,n,a;this._root=e.root,this._root||(globalErrorHandler(Error("ParentBasedSampler must have a root sampler configured")),this._root=new H),this._remoteParentSampled=null!=(t=e.remoteParentSampled)?t:new H,this._remoteParentNotSampled=null!=(r=e.remoteParentNotSampled)?r:new V,this._localParentSampled=null!=(n=e.localParentSampled)?n:new H,this._localParentNotSampled=null!=(a=e.localParentNotSampled)?a:new V}return ParentBasedSampler.prototype.shouldSample=function(e,t,r,n,a,o){var i=l.trace.getSpanContext(e);return i&&(0,l.isSpanContextValid)(i)?i.isRemote?i.traceFlags&l.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,n,a,o):this._remoteParentNotSampled.shouldSample(e,t,r,n,a,o):i.traceFlags&l.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,t,r,n,a,o):this._localParentNotSampled.shouldSample(e,t,r,n,a,o):this._root.shouldSample(e,t,r,n,a,o)},ParentBasedSampler.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},ParentBasedSampler}(),F=function(){function TraceIdRatioBasedSampler(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(0xffffffff*this._ratio)}return TraceIdRatioBasedSampler.prototype.shouldSample=function(e,t){return{decision:(0,l.isValidTraceId)(t)&&this._accumulate(t)<this._upperBound?l.SamplingDecision.RECORD_AND_SAMPLED:l.SamplingDecision.NOT_RECORD}},TraceIdRatioBasedSampler.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},TraceIdRatioBasedSampler.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},TraceIdRatioBasedSampler.prototype._accumulate=function(e){for(var t=0,r=0;r<e.length/8;r++){var n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t},TraceIdRatioBasedSampler}(),K=Function.prototype.toString,k=K.call(Object),W=overArg(Object.getPrototypeOf,Object),z=Object.prototype,Y=z.hasOwnProperty,Z=Symbol?Symbol.toStringTag:void 0,J=z.toString;function overArg(e,t){return function(r){return e(t(r))}}function isPlainObject(e){if(!isObjectLike(e)||"[object Object]"!==baseGetTag(e))return!1;var t=W(e);if(null===t)return!0;var r=Y.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&K.call(r)===k}function isObjectLike(e){return null!=e&&"object"==typeof e}function baseGetTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?getRawTag(e):objectToString(e)}function getRawTag(e){var t=Y.call(e,Z),r=e[Z],n=!1;try{e[Z]=void 0,n=!0}catch(e){}var a=J.call(e);return n&&(t?e[Z]=r:delete e[Z]),a}function objectToString(e){return J.call(e)}function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.shift(),n=new WeakMap;e.length>0;)r=mergeTwoObjects(r,e.shift(),0,n);return r}function takeValue(e){return isArray(e)?e.slice():e}function mergeTwoObjects(e,t,r,n){if(void 0===r&&(r=0),!(r>20)){if(r++,isPrimitive(e)||isPrimitive(t)||isFunction(t))a=takeValue(t);else if(isArray(e)){if(a=e.slice(),isArray(t))for(var a,o=0,i=t.length;o<i;o++)a.push(takeValue(t[o]));else if(isObject(t))for(var T=Object.keys(t),o=0,i=T.length;o<i;o++){var u=T[o];a[u]=takeValue(t[u])}}else if(isObject(e))if(isObject(t)){if(!shouldMerge(e,t))return t;a=Object.assign({},e);for(var T=Object.keys(t),o=0,i=T.length;o<i;o++){var u=T[o],l=t[u];if(isPrimitive(l))void 0===l?delete a[u]:a[u]=l;else{var s=a[u];if(wasObjectReferenced(e,u,n)||wasObjectReferenced(t,u,n))delete a[u];else{if(isObject(s)&&isObject(l)){var _=n.get(s)||[],c=n.get(l)||[];_.push({obj:e,key:u}),c.push({obj:t,key:u}),n.set(s,_),n.set(l,c)}a[u]=mergeTwoObjects(a[u],l,r,n)}}}}else a=t;return a}}function wasObjectReferenced(e,t,r){for(var n=r.get(e[t])||[],a=0,o=n.length;a<o;a++){var i=n[a];if(i.key===t&&i.obj===e)return!0}return!1}function isArray(e){return Array.isArray(e)}function isFunction(e){return"function"==typeof e}function isObject(e){return!isPrimitive(e)&&!isArray(e)&&!isFunction(e)&&"object"==typeof e}function isPrimitive(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}function shouldMerge(e,t){return!!isPlainObject(e)&&!!isPlainObject(t)}var Q=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),$=function(e){function TimeoutError(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,TimeoutError.prototype),r}return Q(TimeoutError,e),TimeoutError}(Error);function callWithTimeout(e,t){var r;return Promise.race([e,new Promise(function(e,n){r=setTimeout(function(){n(new $("Operation timed out."))},t)})]).then(function(e){return clearTimeout(r),e},function(e){throw clearTimeout(r),e})}var url_values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function urlMatches(e,t){return"string"==typeof t?e===t:!!e.match(t)}function isUrlIgnored(e,t){var r,n;if(!t)return!1;try{for(var a=url_values(t),o=a.next();!o.done;o=a.next()){var i=o.value;if(urlMatches(e,i))return!0}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!1}function isWrapped(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var q=function(){function Deferred(){var e=this;this._promise=new Promise(function(t,r){e._resolve=t,e._reject=r})}return Object.defineProperty(Deferred.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),Deferred.prototype.resolve=function(e){this._resolve(e)},Deferred.prototype.reject=function(e){this._reject(e)},Deferred}(),callback_read=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},__spreadArray=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},ee=function(){function BindOnceFuture(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new q}return Object.defineProperty(BindOnceFuture.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(BindOnceFuture.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),BindOnceFuture.prototype.call=function(){for(var e,t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,__spreadArray([this._that],callback_read(r),!1))).then(function(e){return t._deferred.resolve(e)},function(e){return t._deferred.reject(e)})}catch(e){this._deferred.reject(e)}}return this._deferred.promise},BindOnceFuture}(),et={getKeyPairs:getKeyPairs,serializeKeyPairs:serializeKeyPairs,parseKeyPairsIntoRecord:parseKeyPairsIntoRecord,parsePairKeyValue:parsePairKeyValue},er={_export:function(e,t){return new Promise(function(r){l.context.with(suppressTracing(l.context.active()),function(){e.export(t,function(e){r(e)})})})}};module.exports=u})();