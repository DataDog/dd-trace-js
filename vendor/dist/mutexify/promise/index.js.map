{"version":3,"file":"mutexify/promise/index.js","sources":["webpack:///./mutexify/index.js","webpack:///./mutexify/promise.js","webpack:///./queue-tick/process-next-tick.js","webpack:///./queue-tick/queue-microtask.js"],"sourcesContent":["var queueTick = require('queue-tick')\n\nvar mutexify = function () {\n  var queue = []\n  var used = null\n\n  var call = function () {\n    used(release)\n  }\n\n  var acquire = function (fn) {\n    if (used) return queue.push(fn)\n    used = fn\n    acquire.locked = true\n    queueTick(call)\n    return 0\n  }\n\n  acquire.locked = false\n\n  var release = function (fn, err, value) {\n    used = null\n    acquire.locked = false\n    if (queue.length) acquire(queue.shift())\n    if (fn) fn(err, value)\n  }\n\n  return acquire\n}\n\nmodule.exports = mutexify\n","var mutexify = require('.')\n\nvar mutexifyPromise = function () {\n  var lock = mutexify()\n\n  var acquire = function () {\n    return new Promise(lock)\n  }\n\n  Object.defineProperty(acquire, 'locked', {\n    get: function () { return lock.locked },\n    enumerable: true\n  })\n\n  return acquire\n}\n\nmodule.exports = mutexifyPromise\n","module.exports = (typeof process !== 'undefined' && typeof process.nextTick === 'function')\n  ? process.nextTick.bind(process)\n  : require('./queue-microtask')\n","module.exports = typeof queueMicrotask === 'function' ? queueMicrotask : (fn) => Promise.resolve().then(fn)\n"],"names":["call","release","acquire","Promise","Object","process","queueMicrotask"],"mappings":"mDAAA,IAAI,EAAY,EAAQ,oCA8BxB,GAAO,OAAO,CA5BC,WACb,IAAI,EAAQ,EAAE,CACV,EAAO,KAEPA,KAAO,WACT,EAAKC,QACP,EAEIC,QAAU,SAAU,CAAE,SACxB,AAAI,EAAa,EAAM,IAAI,CAAC,IAC5B,EAAO,EACPA,QAAQ,MAAM,CAAG,GACjB,EAAUF,MACH,EACT,CAEAE,CAAAA,QAAQ,MAAM,CAAG,GAEjB,IAAID,QAAU,SAAU,CAAE,CAAE,CAAG,CAAE,CAAK,EACpC,EAAO,KACPC,QAAQ,MAAM,CAAG,GACb,EAAM,MAAM,EAAEA,QAAQ,EAAM,KAAK,IACjC,GAAI,EAAG,EAAK,EAClB,EAEA,OAAOA,OACT,C,0CC5BA,IAAI,EAAW,EAAQ,sBAiBvB,GAAO,OAAO,CAfQ,WACpB,IAAI,EAAO,IAEPA,QAAU,WACZ,OAAO,IAAIC,QAAQ,EACrB,EAOA,OALAC,OAAO,cAAc,CAACF,QAAS,SAAU,CACvC,IAAK,WAAc,OAAO,EAAK,MAAM,AAAC,EACtC,WAAY,EACd,GAEOA,OACT,C,sDCfA,EAAO,OAAO,CAAG,AAAC,AAAmB,aAAnB,OAAOG,SAA2B,AAA4B,YAA5B,OAAOA,QAAQ,QAAQ,CACvEA,QAAQ,QAAQ,CAAC,IAAI,CAACA,SACtB,EAAQ,kC,gDCFZ,EAAO,OAAO,CAAG,AAA0B,YAA1B,OAAOC,eAAgCA,eAAiB,AAAC,GAAOH,QAAQ,OAAO,GAAG,IAAI,CAAC,E"}