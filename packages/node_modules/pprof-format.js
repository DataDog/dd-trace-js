/*! For license information please see pprof-format.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Function:()=>M,Label:()=>U,Line:()=>P,Location:()=>O,Mapping:()=>A,Profile:()=>j,Sample:()=>V,StringTable:()=>L,ValueType:()=>v,emptyTableToken:()=>S});var n,s,i=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};const r=2n**32n-1n,o=2**32-1,a=o+1,c="undefined"==typeof Buffer?e=>(new TextEncoder).encode(e):e=>Buffer.from(e,"utf8");function h(e){if(!e.length)return 0;let t=0;for(;t<e.length&&e[t++]>=128;);return t}function u(e,t=0){return{value:e,offset:t}}function d(e,t){switch(e){case l:for(let e=0;e<t.length;e++)if(!(128&t[e]))return u(t.slice(0,e+1));return u(t);case m:{const e=h(t),n=p(t);return u(t.slice(e,Number(n)+e),e)}default:throw new Error(`Unrecognized value type: ${e}`)}}function f(e){const t=e<0;t&&(e=-e);let n=function(e){return"bigint"!=typeof e?(e>>>0)%a:Number(e&r)}(e),s=function(e){return"bigint"!=typeof e?e/a>>>0:Number(e>>32n&r)}(e);return t&&(s=~s>>>0,n=~n>>>0,++n>o&&(n=0,++s>o&&(s=0))),[s,n]}const l=0,m=2;function p(e){if(h(e)>4)return function(e){if(!e.length)return BigInt(0);let t=BigInt(127&e[0]),n=0;for(;e[n++]>=128;)t|=BigInt(127&e[n])<<BigInt(7*n);return t}(e);if(!e.length)return 0;let t=127&e[0],n=0;for(;e[n++]>=128;)t|=(127&e[n])<<7*n;return t}function g(e){const t=[];let n=0;for(let s=0;s<e.length;s++)128&e[s]||(t.push(p(e.slice(n,s+1))),n=s+1);return t}function y(e,t){return null==t?[e]:(t.push(e),t)}function T(e){if(0===e||0n===e)return 0;const[t,n]=f(e),s=(n>>>28|t<<4)>>>0,i=t>>>24;return 0!==i?i<128?9:10:0!==s?s<16384?s<128?5:6:s<2097152?7:8:n<16384?n<128?1:2:n<2097152?3:4}function b(e){return void 0===e?0:"number"==typeof e||"bigint"==typeof e?T(e)||1:e.length}function w(e){let t=0;for(const n of e)t+=b(n);return t}function B(e){const t=T(e);return t?1+t:0}function _(e){let t=0;for(const n of e)t+=T(n)||1;return t?1+T(t)+t:0}function k(e){const t=b(e);return t?1+T(t)+t:0}function I(e){let t=0;for(const n of e)t+=k(n);return t}function F(e,t,n){if(0===n||0n===n)return e[t++]=0,t;let[s,i]=f(n);for(;s;)e[t++]=127&i|128,i=(i>>>7|s<<25)>>>0,s>>>=7;for(;i>127;)e[t++]=127&i|128,i>>>=7;return e[t++]=i,t}const S=Symbol();class L{constructor(e){this.strings=new Array,n.set(this,new Array),s.set(this,new Map),e!==S&&this.dedup("")}get encodedLength(){let e=0;for(const t of i(this,n,"f"))e+=t.length;return e}_encodeToBuffer(e,t){for(const s of i(this,n,"f"))e.set(s,t),t+=s.length;return t}encode(e=new Uint8Array(this.encodedLength)){return this._encodeToBuffer(e,0),e}static _encodeStringFromUtf8(e){const t=new Uint8Array(1+e.length+(T(e.length)||1));let n=0;return t[n++]=50,n=F(t,n,e.length),e.length>0&&t.set(e,n++),t}static _encodeString(e){return L._encodeStringFromUtf8(c(e))}dedup(e){if("number"==typeof e)return e;if(!i(this,s,"f").has(e)){const t=this.strings.push(e)-1;i(this,s,"f").set(e,t),i(this,n,"f").push(L._encodeString(e))}return i(this,s,"f").get(e)}_decodeString(e){const t=(new TextDecoder).decode(e);i(this,s,"f").set(t,this.strings.push(t)-1),i(this,n,"f").push(L._encodeStringFromUtf8(e))}}function N(e,t){const n={};let s=0;for(;s<e.length;){const i=e[s]>>3,r=7&e[s];s++;const{offset:o,value:a}=d(r,e.slice(s));s+=a.length+o,t(n,i,a)}return n}n=new WeakMap,s=new WeakMap;class v{static create(e){return e instanceof v?e:new v(e)}constructor(e){this.type=e.type||0,this.unit=e.unit||0}get length(){let e=0;return e+=B(this.type),e+=B(this.unit),e}_encodeToBuffer(e,t=0){return this.type&&(e[t++]=8,t=F(e,t,this.type)),this.unit&&(e[t++]=16,t=F(e,t,this.unit)),t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.type=p(n);break;case 2:e.unit=p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}class U{static create(e){return e instanceof U?e:new U(e)}constructor(e){this.key=e.key||0,this.str=e.str||0,this.num=e.num||0,this.numUnit=e.numUnit||0}get length(){let e=0;return e+=B(this.key),e+=B(this.str),e+=B(this.num),e+=B(this.numUnit),e}_encodeToBuffer(e,t=0){return this.key&&(e[t++]=8,t=F(e,t,this.key)),this.str&&(e[t++]=16,t=F(e,t,this.str)),this.num&&(e[t++]=24,t=F(e,t,this.num)),this.numUnit&&(e[t++]=32,t=F(e,t,this.numUnit)),t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.key=p(n);break;case 2:e.str=p(n);break;case 3:e.num=p(n);break;case 4:e.numUnit=p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}class V{static create(e){return e instanceof V?e:new V(e)}constructor(e){this.locationId=e.locationId||[],this.value=e.value||[],this.label=(e.label||[]).map(U.create)}get length(){let e=0;return e+=_(this.locationId),e+=_(this.value),e+=I(this.label),e}_encodeToBuffer(e,t=0){if(this.locationId.length){e[t++]=10,t=F(e,t,w(this.locationId));for(const n of this.locationId)t=F(e,t,n)}if(this.value.length){e[t++]=18,t=F(e,t,w(this.value));for(const n of this.value)t=F(e,t,n)}for(const n of this.label)e[t++]=26,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.locationId=g(n);break;case 2:e.value=g(n);break;case 3:e.label=y(U.decode(n),e.label)}}static decode(e){return new this(N(e,this.decodeValue))}}class A{static create(e){return e instanceof A?e:new A(e)}constructor(e){this.id=e.id||0,this.memoryStart=e.memoryStart||0,this.memoryLimit=e.memoryLimit||0,this.fileOffset=e.fileOffset||0,this.filename=e.filename||0,this.buildId=e.buildId||0,this.hasFunctions=!!e.hasFunctions,this.hasFilenames=!!e.hasFilenames,this.hasLineNumbers=!!e.hasLineNumbers,this.hasInlineFrames=!!e.hasInlineFrames}get length(){let e=0;return e+=B(this.id),e+=B(this.memoryStart),e+=B(this.memoryLimit),e+=B(this.fileOffset),e+=B(this.filename),e+=B(this.buildId),e+=B(this.hasFunctions?1:0),e+=B(this.hasFilenames?1:0),e+=B(this.hasLineNumbers?1:0),e+=B(this.hasInlineFrames?1:0),e}_encodeToBuffer(e,t=0){return this.id&&(e[t++]=8,t=F(e,t,this.id)),this.memoryStart&&(e[t++]=16,t=F(e,t,this.memoryStart)),this.memoryLimit&&(e[t++]=24,t=F(e,t,this.memoryLimit)),this.fileOffset&&(e[t++]=32,t=F(e,t,this.fileOffset)),this.filename&&(e[t++]=40,t=F(e,t,this.filename)),this.buildId&&(e[t++]=48,t=F(e,t,this.buildId)),this.hasFunctions&&(e[t++]=56,t=F(e,t,1)),this.hasFilenames&&(e[t++]=64,t=F(e,t,1)),this.hasLineNumbers&&(e[t++]=72,t=F(e,t,1)),this.hasInlineFrames&&(e[t++]=80,t=F(e,t,1)),t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.id=p(n);break;case 2:e.memoryStart=p(n);break;case 3:e.memoryLimit=p(n);break;case 4:e.fileOffset=p(n);break;case 5:e.filename=p(n);break;case 6:e.buildId=p(n);break;case 7:e.hasFunctions=!!p(n);break;case 8:e.hasFilenames=!!p(n);break;case 9:e.hasLineNumbers=!!p(n);break;case 10:e.hasInlineFrames=!!p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}class P{static create(e){return e instanceof P?e:new P(e)}constructor(e){this.functionId=e.functionId||0,this.line=e.line||0}get length(){let e=0;return e+=B(this.functionId),e+=B(this.line),e}_encodeToBuffer(e,t=0){return this.functionId&&(e[t++]=8,t=F(e,t,this.functionId)),this.line&&(e[t++]=16,t=F(e,t,this.line)),t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.functionId=p(n);break;case 2:e.line=p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}class O{static create(e){return e instanceof O?e:new O(e)}constructor(e){this.id=e.id||0,this.mappingId=e.mappingId||0,this.address=e.address||0,this.line=(e.line||[]).map(P.create),this.isFolded=!!e.isFolded}get length(){let e=0;return e+=B(this.id),e+=B(this.mappingId),e+=B(this.address),e+=I(this.line),e+=B(this.isFolded?1:0),e}_encodeToBuffer(e,t=0){this.id&&(e[t++]=8,t=F(e,t,this.id)),this.mappingId&&(e[t++]=16,t=F(e,t,this.mappingId)),this.address&&(e[t++]=24,t=F(e,t,this.address));for(const n of this.line)e[t++]=34,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return this.isFolded&&(e[t++]=40,t=F(e,t,1)),t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.id=p(n);break;case 2:e.mappingId=p(n);break;case 3:e.address=p(n);break;case 4:e.line=y(P.decode(n),e.line);break;case 5:e.isFolded=!!p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}class M{static create(e){return e instanceof M?e:new M(e)}constructor(e){this.id=e.id||0,this.name=e.name||0,this.systemName=e.systemName||0,this.filename=e.filename||0,this.startLine=e.startLine||0}get length(){let e=0;return e+=B(this.id),e+=B(this.name),e+=B(this.systemName),e+=B(this.filename),e+=B(this.startLine),e}_encodeToBuffer(e,t=0){return this.id&&(e[t++]=8,t=F(e,t,this.id)),this.name&&(e[t++]=16,t=F(e,t,this.name)),this.systemName&&(e[t++]=24,t=F(e,t,this.systemName)),this.filename&&(e[t++]=32,t=F(e,t,this.filename)),this.startLine&&(e[t++]=40,t=F(e,t,this.startLine)),t}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.id=p(n);break;case 2:e.name=p(n);break;case 3:e.systemName=p(n);break;case 4:e.filename=p(n);break;case 5:e.startLine=p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}class j{constructor(e={}){this.sampleType=(e.sampleType||[]).map(v.create),this.sample=(e.sample||[]).map(V.create),this.mapping=(e.mapping||[]).map(A.create),this.location=(e.location||[]).map(O.create),this.function=(e.function||[]).map(M.create),this.stringTable=e.stringTable||new L,this.dropFrames=e.dropFrames||0,this.keepFrames=e.keepFrames||0,this.timeNanos=e.timeNanos||0,this.durationNanos=e.durationNanos||0,this.periodType=e.periodType?v.create(e.periodType):void 0,this.period=e.period||0,this.comment=e.comment||[],this.defaultSampleType=e.defaultSampleType||0}get length(){let e=0;return e+=I(this.sampleType),e+=I(this.sample),e+=I(this.mapping),e+=I(this.location),e+=I(this.function),e+=this.stringTable.encodedLength,e+=B(this.dropFrames),e+=B(this.keepFrames),e+=B(this.timeNanos),e+=B(this.durationNanos),e+=k(this.periodType),e+=B(this.period),e+=_(this.comment),e+=B(this.defaultSampleType),e}_encodeSampleTypesToBuffer(e,t=0){for(const n of this.sampleType)e[t++]=10,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return t}_encodeSamplesToBuffer(e,t=0){for(const n of this.sample)e[t++]=18,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return t}_encodeMappingsToBuffer(e,t=0){for(const n of this.mapping)e[t++]=26,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return t}_encodeLocationsToBuffer(e,t=0){for(const n of this.location)e[t++]=34,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return t}_encodeFunctionsToBuffer(e,t=0){for(const n of this.function)e[t++]=42,t=F(e,t,n.length),t=n._encodeToBuffer(e,t);return t}_encodeBasicValuesToBuffer(e,t=0){if(this.dropFrames&&(e[t++]=56,t=F(e,t,this.dropFrames)),this.keepFrames&&(e[t++]=64,t=F(e,t,this.keepFrames)),this.timeNanos&&(e[t++]=72,t=F(e,t,this.timeNanos)),this.durationNanos&&(e[t++]=80,t=F(e,t,this.durationNanos)),void 0!==this.periodType&&(e[t++]=90,t=F(e,t,this.periodType.length),t=this.periodType._encodeToBuffer(e,t)),this.period&&(e[t++]=96,t=F(e,t,this.period)),this.comment.length){e[t++]=106,t=F(e,t,w(this.comment));for(const n of this.comment)t=F(e,t,n)}return this.defaultSampleType&&(e[t++]=112,t=F(e,t,this.defaultSampleType)),t}_encodeToBuffer(e,t=0){return t=this._encodeSampleTypesToBuffer(e,t),t=this._encodeSamplesToBuffer(e,t),t=this._encodeMappingsToBuffer(e,t),t=this._encodeLocationsToBuffer(e,t),t=this._encodeFunctionsToBuffer(e,t),t=this.stringTable._encodeToBuffer(e,t),this._encodeBasicValuesToBuffer(e,t)}async _encodeToBufferAsync(e,t=0){return t=this._encodeSampleTypesToBuffer(e,t),await new Promise(setImmediate),t=this._encodeSamplesToBuffer(e,t),await new Promise(setImmediate),t=this._encodeMappingsToBuffer(e,t),await new Promise(setImmediate),t=this._encodeLocationsToBuffer(e,t),await new Promise(setImmediate),t=this._encodeFunctionsToBuffer(e,t),await new Promise(setImmediate),t=this.stringTable._encodeToBuffer(e,t),await new Promise(setImmediate),this._encodeBasicValuesToBuffer(e,t)}encode(e=new Uint8Array(this.length)){return this._encodeToBuffer(e,0),e}async encodeAsync(e=new Uint8Array(this.length)){return await this._encodeToBufferAsync(e,0),e}static decodeValue(e,t,n){switch(t){case 1:e.sampleType=y(v.decode(n),e.sampleType);break;case 2:e.sample=y(V.decode(n),e.sample);break;case 3:e.mapping=y(A.decode(n),e.mapping);break;case 4:e.location=y(O.decode(n),e.location);break;case 5:e.function=y(M.decode(n),e.function);break;case 6:void 0===e.stringTable&&(e.stringTable=new L(S)),e.stringTable._decodeString(n);break;case 7:e.dropFrames=p(n);break;case 8:e.keepFrames=p(n);break;case 9:e.timeNanos=p(n);break;case 10:e.durationNanos=p(n);break;case 11:e.periodType=v.decode(n);break;case 12:e.period=p(n);break;case 13:e.comment=g(n);break;case 14:e.defaultSampleType=p(n)}}static decode(e){return new this(N(e,this.decodeValue))}}module.exports=t})();