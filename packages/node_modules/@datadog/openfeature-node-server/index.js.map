{"version":3,"file":"@datadog/openfeature-node-server/index.js","sources":["webpack:///./spark-md5/spark-md5.js","webpack:///webpack/runtime/compat_get_default_export","webpack:///webpack/runtime/define_property_getters","webpack:///webpack/runtime/has_own_property","webpack:///webpack/runtime/make_namespace_object","webpack:///./@datadog/openfeature-node-server/esm/rules/rules.js","webpack:///./@datadog/flagging-core/esm/obfuscation.js","webpack:///./@datadog/flagging-core/esm/cache/abstract-assignment-cache.js","webpack:///./@datadog/flagging-core/esm/cache/lru-cache.js","webpack:///./@datadog/flagging-core/esm/cache/lru-in-memory-assignment-cache.js","webpack:///./@datadog/openfeature-node-server/esm/shards/sharders.js","webpack:///./@datadog/openfeature-node-server/esm/configuration/evaluation.js","webpack:///./@datadog/openfeature-node-server/esm/configuration/evaluateForSubject.js","webpack:///./@datadog/openfeature-node-server/esm/shards/matchesShard.js","webpack:///./@datadog/openfeature-node-server/esm/configuration/ufc-v1.js","webpack:///./@datadog/openfeature-node-server/esm/initialization-controller.js","webpack:///./@datadog/openfeature-node-server/esm/provider.js","webpack:///./@datadog/flagging-core/esm/configuration/exposureEvent.js"],"sourcesContent":["(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export var OperatorType;\n(function (OperatorType) {\n    OperatorType[\"MATCHES\"] = \"MATCHES\";\n    OperatorType[\"NOT_MATCHES\"] = \"NOT_MATCHES\";\n    OperatorType[\"GTE\"] = \"GTE\";\n    OperatorType[\"GT\"] = \"GT\";\n    OperatorType[\"LTE\"] = \"LTE\";\n    OperatorType[\"LT\"] = \"LT\";\n    OperatorType[\"ONE_OF\"] = \"ONE_OF\";\n    OperatorType[\"NOT_ONE_OF\"] = \"NOT_ONE_OF\";\n    OperatorType[\"IS_NULL\"] = \"IS_NULL\";\n})(OperatorType || (OperatorType = {}));\nexport function matchesRule(rule, subjectAttributes) {\n    const conditionEvaluations = evaluateRuleConditions(subjectAttributes, rule.conditions);\n    // TODO: short-circuit return when false condition is found\n    return !conditionEvaluations.includes(false);\n}\nfunction evaluateRuleConditions(subjectAttributes, conditions) {\n    return conditions.map((condition) => evaluateCondition(subjectAttributes, condition));\n}\nfunction evaluateCondition(subjectAttributes, condition) {\n    const value = subjectAttributes[condition.attribute];\n    if (condition.operator === OperatorType.IS_NULL) {\n        if (condition.value) {\n            return value === null || value === undefined;\n        }\n        return value !== null && value !== undefined;\n    }\n    if (value !== null && value !== undefined) {\n        switch (condition.operator) {\n            case OperatorType.GTE:\n            case OperatorType.GT:\n            case OperatorType.LTE:\n            case OperatorType.LT: {\n                const comparator = (a, b) => condition.operator === OperatorType.GTE\n                    ? a >= b\n                    : condition.operator === OperatorType.GT\n                        ? a > b\n                        : condition.operator === OperatorType.LTE\n                            ? a <= b\n                            : a < b;\n                return compareNumber(value, condition.value, comparator);\n            }\n            case OperatorType.MATCHES:\n                // ReDoS mitigation should happen on user input to avoid event loop saturation (https://datadoghq.atlassian.net/browse/FFL-1060)\n                return new RegExp(condition.value).test(String(value)); // dd-iac-scan ignore-line\n            case OperatorType.NOT_MATCHES:\n                // ReDoS mitigation should happen on user input to avoid event loop saturation (https://datadoghq.atlassian.net/browse/FFL-1060)\n                return !new RegExp(condition.value).test(String(value)); // dd-iac-scan ignore-line\n            case OperatorType.ONE_OF:\n                return isOneOf(value.toString(), condition.value);\n            case OperatorType.NOT_ONE_OF:\n                return isNotOneOf(value.toString(), condition.value);\n        }\n    }\n    return false;\n}\nfunction isOneOf(attributeValue, conditionValues) {\n    return conditionValues.includes(attributeValue);\n}\nfunction isNotOneOf(attributeValue, conditionValues) {\n    return !isOneOf(attributeValue, conditionValues);\n}\nfunction compareNumber(attributeValue, conditionValue, compareFn) {\n    return compareFn(Number(attributeValue), Number(conditionValue));\n}\n//# sourceMappingURL=rules.js.map","import SparkMD5 from 'spark-md5';\nexport function getMD5Hash(input, salt = '') {\n    return new SparkMD5().append(salt).append(input).end();\n}\n/**\n * Builds a storage key suffix from an API key.\n * @param apiKey - The API key to build the suffix from\n * @returns A string suffix for storage keys\n * @public\n */\nexport function buildStorageKeySuffix(apiKey) {\n    // Note that we hash the API key and use the first 16 characters of the digest.\n    const hashed = getMD5Hash(apiKey);\n    return hashed.slice(0, 16);\n}\n//# sourceMappingURL=obfuscation.js.map","import { getMD5Hash } from '../obfuscation';\n/** Converts an {@link AssignmentCacheKey} to a string. */\nexport function assignmentCacheKeyToString(exposureEvent) {\n    const key = {\n        flag: {\n            key: exposureEvent.flag.key,\n        },\n        subject: {\n            id: exposureEvent.subject.id,\n            attributes: exposureEvent.subject.attributes,\n        },\n    };\n    return getMD5Hash(JSON.stringify(key));\n}\n/** Converts an {@link AssignmentCacheValue} to a string. */\nexport function assignmentCacheValueToString(cacheValue) {\n    return getMD5Hash(JSON.stringify(cacheValue));\n}\nexport class AbstractAssignmentCache {\n    // key -> variation value hash\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    init() {\n        return Promise.resolve();\n    }\n    /** Returns whether the provided {@link AssignmentCacheEntry} is present in the cache. */\n    has(entry) {\n        return this.get(entry) === assignmentCacheValueToString(entry);\n    }\n    get(key) {\n        return this.delegate.get(assignmentCacheKeyToString(key));\n    }\n    /**\n     * Stores the provided {@link AssignmentCacheEntry} in the cache. If the key already exists, it\n     * will be overwritten.\n     */\n    set(entry) {\n        this.delegate.set(assignmentCacheKeyToString(entry), assignmentCacheValueToString(entry));\n    }\n    /**\n     * Returns an array with all {@link AssignmentCacheEntry} entries in the cache as an array of\n     * {@link string}s.\n     */\n    entries() {\n        return this.delegate.entries();\n    }\n    /** Clears all entries from the cache. */\n    clear() {\n        this.delegate.clear();\n    }\n}\n//# sourceMappingURL=abstract-assignment-cache.js.map","/**\n * LRUCache is a simple implementation of a Least Recently Used (LRU) cache.\n *\n * Old items are evicted when the cache reaches its capacity.\n *\n * The cache is implemented as a Map, which maintains insertion order:\n * ```\n * Iteration happens in insertion order, which corresponds to the order in which each key-value pair\n * was first inserted into the map by the set() method (that is, there wasn't a key with the same\n * value already in the map when set() was called).\n * ```\n * Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\n */\nexport class LRUCache {\n    constructor(capacity) {\n        this.capacity = capacity;\n        this.cache = new Map();\n        this.size = this.cache.size;\n    }\n    [(Symbol.toStringTag, Symbol.iterator)]() {\n        return this.cache[Symbol.iterator]();\n    }\n    forEach(callbackFn) {\n        this.cache.forEach(callbackFn);\n    }\n    entries() {\n        return this.cache.entries();\n    }\n    clear() {\n        this.cache.clear();\n    }\n    delete(key) {\n        return this.cache.delete(key);\n    }\n    keys() {\n        return this.cache.keys();\n    }\n    values() {\n        return this.cache.values();\n    }\n    has(key) {\n        return this.cache.has(key);\n    }\n    get(key) {\n        if (!this.has(key)) {\n            return undefined;\n        }\n        const value = this.cache.get(key);\n        if (value !== undefined) {\n            // the delete and set operations are used together to ensure that the most recently accessed\n            // or added item is always considered the \"newest\" in terms of access order.\n            // This is crucial for maintaining the correct order of elements in the cache,\n            // which directly impacts which item is considered the least recently used (LRU) and\n            // thus eligible for eviction when the cache reaches its capacity.\n            this.delete(key);\n            this.cache.set(key, value);\n        }\n        return value;\n    }\n    set(key, value) {\n        if (this.capacity === 0) {\n            return this;\n        }\n        if (this.cache.has(key)) {\n            this.cache.delete(key);\n        }\n        else if (this.cache.size >= this.capacity) {\n            // To evict the least recently used (LRU) item, we retrieve the first key in the Map.\n            // This is possible because the Map object in JavaScript maintains the insertion order of the keys.\n            // Therefore, the first key represents the oldest entry, which is the least recently used item in our cache.\n            // We use Map.prototype.keys().next().value to obtain this oldest key and then delete it from the cache.\n            const oldestKey = this.cache.keys().next().value;\n            if (oldestKey) {\n                this.delete(oldestKey);\n            }\n        }\n        this.cache.set(key, value);\n        return this;\n    }\n}\n//# sourceMappingURL=lru-cache.js.map","import { AbstractAssignmentCache } from './abstract-assignment-cache';\nimport { LRUCache } from './lru-cache';\n/**\n * A cache that uses the LRU algorithm to evict the least recently used items.\n *\n * It is used to limit the size of the cache.\n *\n * The primary use case is for server-side SDKs, where the cache is shared across\n * multiple users. In this case, the cache size should be set to the maximum number\n * of users that can be active at the same time.\n * @param {number} maxSize - Maximum cache size\n */\nexport class LRUInMemoryAssignmentCache extends AbstractAssignmentCache {\n    constructor(maxSize) {\n        super(new LRUCache(maxSize));\n    }\n}\n//# sourceMappingURL=lru-in-memory-assignment-cache.js.map","import { getMD5Hash } from '@datadog/flagging-core';\nexport class Sharder {\n}\nexport class MD5Sharder extends Sharder {\n    getShard(input, totalShards) {\n        const hashOutput = getMD5Hash(input);\n        // get the first 4 bytes of the md5 hex string and parse it using base 16\n        // (8 hex characters represent 4 bytes, e.g. 0xffffffff represents the max 4-byte integer)\n        const intFromHash = parseInt(hashOutput.slice(0, 8), 16);\n        return intFromHash % totalShards;\n    }\n}\nexport class DeterministicSharder extends Sharder {\n    constructor(lookup) {\n        super();\n        this.lookup = lookup;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getShard(input, _totalShards) {\n        var _a;\n        return (_a = this.lookup[input]) !== null && _a !== void 0 ? _a : 0;\n    }\n}\n//# sourceMappingURL=sharders.js.map","import { ErrorCode, StandardResolutionReasons, } from '@openfeature/server-sdk';\nimport { evaluateForSubject } from './evaluateForSubject';\nexport function evaluate(config, type, flagKey, defaultValue, context, logger) {\n    if (!config) {\n        return {\n            value: defaultValue,\n            reason: 'ERROR',\n            errorCode: ErrorCode.PROVIDER_NOT_READY,\n        };\n    }\n    const { targetingKey: subjectKey, ...remainingContext } = context;\n    if (!subjectKey) {\n        return {\n            value: defaultValue,\n            reason: 'ERROR',\n            errorCode: ErrorCode.TARGETING_KEY_MISSING,\n        };\n    }\n    // Include the subjectKey as an \"id\" attribute for rule matching\n    const subjectAttributes = {\n        id: subjectKey,\n        ...remainingContext,\n    };\n    try {\n        const resultWithDetails = evaluateForSubject(config.flags[flagKey], type, subjectKey, subjectAttributes, defaultValue, logger);\n        return resultWithDetails;\n    }\n    catch (error) {\n        logger.error('Error evaluating flag', { error });\n        return {\n            value: defaultValue,\n            reason: StandardResolutionReasons.ERROR,\n            errorCode: ErrorCode.GENERAL,\n        };\n    }\n}\n//# sourceMappingURL=evaluation.js.map","import { ErrorCode, StandardResolutionReasons, } from '@openfeature/server-sdk';\nimport { matchesRule } from '../rules/rules';\nimport { matchesShard } from '../shards/matchesShard';\nimport { variantTypeToFlagValueType } from './ufc-v1';\nexport function evaluateForSubject(flag, type, subjectKey, subjectAttributes, defaultValue, logger) {\n    if (!(flag === null || flag === void 0 ? void 0 : flag.enabled)) {\n        logger.debug(`returning default assignment because flag is disabled`, {\n            flagKey: flag ? flag.key : 'undefined',\n            subjectKey,\n        });\n        return {\n            value: defaultValue,\n            reason: StandardResolutionReasons.DISABLED,\n        };\n    }\n    const isValid = validateTypeMatch(type, flag.variationType);\n    if (!isValid) {\n        logger.debug(`variant value type mismatch, returning default value`, {\n            flagKey: flag.key,\n            subjectKey,\n            expectedType: type,\n            variantType: flag.variationType,\n        });\n        return {\n            value: defaultValue,\n            reason: StandardResolutionReasons.ERROR,\n            errorCode: ErrorCode.TYPE_MISMATCH,\n        };\n    }\n    const now = new Date();\n    for (const allocation of flag.allocations) {\n        if (allocation.startAt && now < new Date(allocation.startAt)) {\n            logger.debug(`allocation before start date`, {\n                flagKey: flag.key,\n                subjectKey,\n                allocationKey: allocation.key,\n                startAt: allocation.startAt,\n            });\n            continue;\n        }\n        if (allocation.endAt && now >= new Date(allocation.endAt)) {\n            logger.debug(`allocation after end date`, {\n                flagKey: flag.key,\n                subjectKey,\n                allocationKey: allocation.key,\n                endAt: allocation.endAt,\n            });\n            continue;\n        }\n        const matched = containsMatchingRule(allocation.rules, subjectAttributes, logger);\n        if (!matched) {\n            continue;\n        }\n        const selectedSplit = selectSplitUsingSharding(allocation.splits, subjectKey, flag.key, logger);\n        if (selectedSplit) {\n            const variant = flag.variations[selectedSplit.variationKey];\n            if (variant) {\n                logger.debug(`evaluated a flag`, {\n                    flagKey: flag.key,\n                    subjectKey,\n                    assignment: variant.value,\n                });\n                return {\n                    value: variant.value,\n                    reason: StandardResolutionReasons.TARGETING_MATCH,\n                    variant: variant.key,\n                    flagMetadata: {\n                        allocationKey: allocation.key,\n                        variationType: variantTypeToFlagValueType(flag.variationType),\n                        doLog: !!allocation.doLog,\n                    },\n                };\n            }\n        }\n        else {\n            logger.debug(`no matching split found for subject`, {\n                flagKey: flag.key,\n                subjectKey,\n                allocationKey: allocation.key,\n            });\n        }\n    }\n    // This shouldn't happen since a default allocation is generated by the server\n    logger.debug(`returning default assignment because no allocation matched`, {\n        flagKey: flag.key,\n        subjectKey,\n    });\n    return {\n        value: defaultValue,\n        reason: StandardResolutionReasons.DEFAULT,\n    };\n}\nfunction validateTypeMatch(expectedType, variantType) {\n    if (expectedType === 'boolean') {\n        return variantType === 'BOOLEAN';\n    }\n    if (expectedType === 'string') {\n        return variantType === 'STRING';\n    }\n    if (expectedType === 'number') {\n        return variantType === 'INTEGER' || variantType === 'NUMERIC';\n    }\n    if (expectedType === 'object') {\n        return variantType === 'JSON';\n    }\n    throw new Error(`Invalid expected type: ${expectedType}`);\n}\nexport function containsMatchingRule(rules, subjectAttributes, logger) {\n    if (!(rules === null || rules === void 0 ? void 0 : rules.length)) {\n        return true;\n    }\n    logger.debug(`evaluating rules`, {\n        rules: JSON.stringify(rules),\n        subjectAttributes,\n    });\n    return rules.some((rule) => matchesRule(rule, subjectAttributes));\n}\nfunction selectSplitUsingSharding(splits, subjectKey, flagKey, logger) {\n    if (!splits || splits.length === 0) {\n        return null;\n    }\n    for (const split of splits) {\n        logger.debug(`evaluating split sharding`, {\n            flagKey,\n            subjectKey,\n            variationKey: split.variationKey,\n            shards: split.shards,\n        });\n        const matches = split.shards.every((shard) => {\n            const shardMatches = matchesShard(shard, subjectKey);\n            logger.debug(`shard match result`, {\n                flagKey,\n                subjectKey,\n                variationKey: split.variationKey,\n                shard: shard,\n                matches: shardMatches,\n            });\n            return shardMatches;\n        });\n        if (matches) {\n            logger.debug(`subject matches split`, {\n                flagKey,\n                subjectKey,\n                variationKey: split.variationKey,\n            });\n            return split;\n        }\n    }\n    logger.debug(`subject matches no splits`, {\n        flagKey,\n        subjectKey,\n    });\n    return null;\n}\n//# sourceMappingURL=evaluateForSubject.js.map","import { MD5Sharder } from './sharders';\nexport function matchesShard(shard, subjectKey, customSharder) {\n    const sharder = customSharder !== null && customSharder !== void 0 ? customSharder : new MD5Sharder();\n    const assignedShard = sharder.getShard(hashKey(shard.salt, subjectKey), shard.totalShards);\n    return shard.ranges.some((range) => isInShardRange(assignedShard, range));\n}\nfunction isInShardRange(shard, range) {\n    return range.start <= shard && shard < range.end;\n}\nfunction hashKey(salt, subjectKey) {\n    return `${salt}-${subjectKey}`;\n}\n//# sourceMappingURL=matchesShard.js.map","export function variantTypeToFlagValueType(variantType) {\n    if (variantType === 'BOOLEAN') {\n        return 'boolean';\n    }\n    if (variantType === 'STRING') {\n        return 'string';\n    }\n    if (variantType === 'INTEGER' || variantType === 'NUMERIC') {\n        return 'number';\n    }\n    if (variantType === 'JSON') {\n        return 'object';\n    }\n    throw new Error(`Cannot convert variant type to flag value type: ${variantType}`);\n}\n//# sourceMappingURL=ufc-v1.js.map","/**\n * Manages deferred initialization with timeout support.\n * Encapsulates the pattern of waiting for external resolution/rejection\n * with automatic timeout handling and cleanup.\n */\nexport class InitializationController {\n    constructor(timeoutMs, onTimeout) {\n        this.promise = Promise.race([\n            // Deferred promise - resolved/rejected externally\n            new Promise((resolve, reject) => {\n                this.resolve = () => {\n                    this.cleanup();\n                    resolve();\n                };\n                this.reject = (reason) => {\n                    this.cleanup();\n                    reject(reason);\n                };\n            }),\n            // Timeout promise\n            new Promise(() => {\n                this.timeoutId = setTimeout(() => {\n                    onTimeout();\n                }, timeoutMs);\n            }),\n        ]);\n    }\n    /**\n     * Wait for initialization to complete (or timeout)\n     */\n    async wait() {\n        try {\n            await this.promise;\n        }\n        finally {\n            this.cleanup();\n        }\n    }\n    /**\n     * Complete initialization successfully\n     */\n    complete() {\n        if (this.resolve) {\n            this.resolve();\n        }\n    }\n    /**\n     * Fail initialization with an error\n     */\n    fail(error) {\n        if (this.reject) {\n            this.reject(error);\n        }\n    }\n    /**\n     * Check if initialization is still in progress\n     */\n    isInitializing() {\n        return this.resolve !== undefined;\n    }\n    cleanup() {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = undefined;\n        }\n        this.resolve = undefined;\n        this.reject = undefined;\n    }\n}\n//# sourceMappingURL=initialization-controller.js.map","import { createExposureEvent, LRUInMemoryAssignmentCache, } from '@datadog/flagging-core';\nimport { OpenFeatureEventEmitter, ProviderEvents } from '@openfeature/server-sdk';\nimport { evaluate } from './configuration/evaluation';\nimport { InitializationController } from './initialization-controller';\n/**\n * Default timeout in milliseconds for provider initialization.\n */\nconst DEFAULT_INITIALIZATION_TIMEOUT_MS = 30000;\nexport class DatadogNodeServerProvider {\n    constructor(options) {\n        this.options = options;\n        this.metadata = {\n            name: 'datadog-node-server',\n        };\n        this.runsOn = 'server';\n        this.hooks = [];\n        this.events = new OpenFeatureEventEmitter();\n        this.exposureCache = new LRUInMemoryAssignmentCache(50000);\n    }\n    /**\n     * Used by dd-source-js\n     */\n    getConfiguration() {\n        return this.configuration;\n    }\n    /**\n     * Used by dd-source-js\n     */\n    setConfiguration(configuration) {\n        var _a, _b, _c;\n        const prevCreatedAt = (_a = this.configuration) === null || _a === void 0 ? void 0 : _a.createdAt;\n        const hadConfiguration = !!this.configuration;\n        if (hadConfiguration && this.configuration !== configuration) {\n            this.events.emit(ProviderEvents.ConfigurationChanged);\n            const newCreatedAt = configuration === null || configuration === void 0 ? void 0 : configuration.createdAt;\n            if (prevCreatedAt !== newCreatedAt) {\n                (_b = this.exposureCache) === null || _b === void 0 ? void 0 : _b.clear();\n            }\n            this.configuration = configuration;\n            return;\n        }\n        this.configuration = configuration;\n        if ((_c = this.initController) === null || _c === void 0 ? void 0 : _c.isInitializing()) {\n            // First configuration during initialization - resolve the initialization promise\n            // This will cause OpenFeature SDK to emit PROVIDER_READY\n            this.initController.complete();\n        }\n        else if (!hadConfiguration) {\n            // Configuration is being set after initialization completed/failed (e.g., after timeout)\n            // Emit PROVIDER_READY to signal recovery from error state\n            this.events.emit(ProviderEvents.Ready);\n        }\n    }\n    /**\n     * Used by dd-source-js\n     */\n    setError(error) {\n        var _a;\n        if ((_a = this.initController) === null || _a === void 0 ? void 0 : _a.isInitializing()) {\n            this.initController.fail(error);\n        }\n        else {\n            this.events.emit(ProviderEvents.Error, { error });\n        }\n    }\n    /**\n     * Used by the OpenFeature SDK to set the status based on initialization.\n     * Status of 'PROVIDER_READY' is emitted with a resolved promise.\n     * Status of 'PROVIDER_ERROR' is emitted with a rejected promise.\n     *\n     * Since we aren't loading the configuration in this Provider, we will simulate\n     * loading functionality via InitializationController.\n     * See setConfiguration and setError for more details.\n     */\n    async initialize() {\n        var _a, _b;\n        if (this.configuration) {\n            return;\n        }\n        const timeoutMs = (_a = this.options.initializationTimeoutMs) !== null && _a !== void 0 ? _a : DEFAULT_INITIALIZATION_TIMEOUT_MS;\n        this.initController = new InitializationController(timeoutMs, () => this.setError(new Error(`Initialization timeout after ${timeoutMs}ms`)));\n        await this.initController.wait();\n        await ((_b = this.exposureCache) === null || _b === void 0 ? void 0 : _b.init());\n    }\n    async resolveBooleanEvaluation(flagKey, defaultValue, context, _logger) {\n        const resolutionDetails = evaluate(this.configuration, 'boolean', flagKey, defaultValue, context, _logger);\n        this.handleExposure(flagKey, context, resolutionDetails);\n        return resolutionDetails;\n    }\n    async resolveStringEvaluation(flagKey, defaultValue, context, _logger) {\n        const resolutionDetails = evaluate(this.configuration, 'string', flagKey, defaultValue, context, _logger);\n        this.handleExposure(flagKey, context, resolutionDetails);\n        return resolutionDetails;\n    }\n    async resolveNumberEvaluation(flagKey, defaultValue, context, _logger) {\n        const resolutionDetails = evaluate(this.configuration, 'number', flagKey, defaultValue, context, _logger);\n        this.handleExposure(flagKey, context, resolutionDetails);\n        return resolutionDetails;\n    }\n    async resolveObjectEvaluation(flagKey, defaultValue, context, _logger) {\n        // type safety: OpenFeature interface requires us to return a\n        // specific T for *any* value of T (which could be any subtype of\n        // JsonValue). We can't even theoretically implement it in a\n        // type-sound way because there's no runtime information passed to\n        // learn what type the user expects. So it's up to the user to\n        // make sure they pass the appropriate type.\n        const resolutionDetails = evaluate(this.configuration, 'object', flagKey, defaultValue, context, _logger);\n        this.handleExposure(flagKey, context, resolutionDetails);\n        return resolutionDetails;\n    }\n    handleExposure(flagKey, context, resolutionDetails) {\n        var _a, _b, _c;\n        const timestamp = Date.now();\n        const evalutationDetails = {\n            ...resolutionDetails,\n            flagKey: flagKey,\n            flagMetadata: (_a = resolutionDetails.flagMetadata) !== null && _a !== void 0 ? _a : {},\n        };\n        const exposureEvent = createExposureEvent(context, evalutationDetails);\n        if (!exposureEvent) {\n            return;\n        }\n        const hasLoggedAssignment = (_b = this.exposureCache) === null || _b === void 0 ? void 0 : _b.has(exposureEvent);\n        if (hasLoggedAssignment) {\n            return;\n        }\n        if (this.options.exposureChannel.hasSubscribers) {\n            this.options.exposureChannel.publish({ ...exposureEvent, timestamp });\n            (_c = this.exposureCache) === null || _c === void 0 ? void 0 : _c.set(exposureEvent);\n        }\n    }\n}\n//# sourceMappingURL=provider.js.map","export function createExposureEvent(context, details) {\n    var _a, _b;\n    // Only log if doLog flag is true\n    if (!((_a = details.flagMetadata) === null || _a === void 0 ? void 0 : _a.doLog)) {\n        return;\n    }\n    // Skip logging if allocation key or variant is missing (this should never happen)\n    const allocationKey = (_b = details.flagMetadata) === null || _b === void 0 ? void 0 : _b.allocationKey;\n    const variantKey = details.variant;\n    if (!allocationKey || !variantKey) {\n        return;\n    }\n    const { targetingKey: id = '', ...attributes } = context;\n    return {\n        allocation: {\n            key: allocationKey,\n        },\n        flag: {\n            key: details.flagKey,\n        },\n        variant: {\n            key: variantKey,\n        },\n        subject: {\n            id,\n            attributes,\n        },\n    };\n}\n//# sourceMappingURL=exposureEvent.js.map"],"names":["parseInt","unescape","encodeURIComponent","String","ArrayBuffer","Math","n","s","Uint8Array","r","i","e","Object","Symbol","JSON","Promise","Map","t","Error","Date","Number","RegExp","setTimeout","clearTimeout","a"],"mappings":"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"}